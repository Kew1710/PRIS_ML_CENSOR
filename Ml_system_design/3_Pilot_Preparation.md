# Подготовка
## Процесс сбора и разметки данных

### 1. Источники данных
- Исторические комментарии с платформы за последние 3–6 месяцев.
- Приоритет: посты с высокой вовлечённостью, реклама, новости.
- Извлекаемые поля: `text`, `post_id`, `user_id`, `timestamp`, `likes`, `reports`.

### 2. Очистка данных
- Удаление дубликатов, пустых строк, HTML, ссылок, эмодзи.
- Приведение к нижнему регистру, базовая токенизация, фильтрация спама.

### 3. Разметка
- Классы:
  - позитивный
  - нейтральный
  - негативный
- Разметка минимум двумя аннотаторами, при расхождении — арбитраж.
- Объём: от 20,000 до 30,000 комментариев.
- Инструмент: Label Studio / собственный веб-интерфейс.

### 4. Балансировка классов
- Контроль пропорций редких классов, техники:
  - undersampling
  - oversampling
  - синтетическая генерация (опционально)

## Setup среды для обучения и тестирования

### 1. Инфраструктура
- Язык: Python 3.10+
- Фреймворки: PyTorch или HuggingFace Transformers
- Оборудование: 1×GPU (NVIDIA T4/A100) или облако (GCP, AWS)
- CUDA: 11.7+

### 2. Обучающий пайплайн
- Токенизация: BERT / RuBERT
- Fine-tuning с `cross-entropy loss` на размеченном датасете
- Валидация:
  - `train/test` сплит 80/20
  - или `k-fold` (5-кратная)

### 3. Логирование и мониторинг
- Использование: Weights & Biases / MLflow
- Логируются:
  - метрики
  - confusion matrix
  - примеры ошибок

### 4. Тестирование в прототипе
- Развёртывание API-сервиса в sandbox
- Интеграция с системой комментариев
- Возможность ручной валидации результата

## Метрики приёмки пилота

### 1. Качество модели
- `F1-score` ≥ 0.80 (негативные + токсичные)
- `Precision` ≥ 0.90 (токсичные)
- `Recall` ≥ 0.75 (негативные)

### 2. Производительность
- Время инференса ≤ 50 мс / комментарий
- Пропускная способность ≥ 10,000 комментариев в минуту

### 3. Устойчивость
- Падение метрик на новых данных не более 5%
- A/B-тест на 5,000 комментариев: сравнение с модераторами

### 4. Удобство и принятие пользователями
- Интерфейс показывает предсказание и обоснование (например, attention)
- Подтверждённая точность по мнению модераторов ≥ 85%

